# CHAPTER 09 유연한 설계

## 01 개방 폐쇄의 원칙

컴파일 타임에 의존성을 고정 시키고 런타임 의존성을 변경하라

### 생성과 사용 분리하기
Factory 클래스를 만들어서 생성하는 책임을 위임 합니다.

### 순수한 가공물에게 책임 할당하기
Factory 클래스는 도메인 개념과 아무런 상관이 없는 가공의 객체입니다.  
어떤 행동을 추가하려고 하는데 이 행동을 책임질 마땅한 도메인 개념이 존재하지 않는다면 PURE FABRICATION(순수한 가공물)을 추가하고
이 객체에게 책임을 할당 합니다.


## 02 의존성 주입

- 생성자 주입
- setter 주입
- 메서드 주입

### SERVICE LOCATOR 패턴
의존성을 해결할 객체들을 보관하는 저장소.

의존성이 숨겨지기 때문에 좋지는 않습니다.

## 04 의존성 역전 원칙

### 추상화와 의존성 역전

```java
public class Movie {
    private AmountDiscountPolicy discountPolicy;
}
```

이 설계가 변경에 취약한 이유는 요금을 계산하는 상위 정책이 요금을 계산하는데 필요한 구체적인 방법에 의존하기 때문입니다.

Movie는 '가격 계산'이라는 더 높은 수준의 개념을 구현합니다. 그에비해 AmountDiscountPolicy는 영화의 가격에서 특정한 금액만큼을 할인해주는
더 구체적인 수준의 메커니즘을 담당하고 있습니다.

상위수준의 클래스는 어떻게 해서든 하위 수준의 클래스에 의존 해서는 안 되는 것입니다.

'차트 데이터를 생성한다.' --> '시간 단위에 따른 계산 방법을 결정한다.' 여기에서 '차트 데이터를 생성한다.'가 상위 수준의 연산입니다.
